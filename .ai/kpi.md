# KPI指标与口径 - 汇仁药业低代码平台

## 文档信息

| 项目 | 内容 |
|------|------|
| 版本 | v2.0 |
| 创建时间 | 2025-12-11 |
| 更新时间 | 2025-12-11 |

---

## 1. 生产管理指标（MES）

### 1.1 今日产量

| 项目 | 内容 |
|------|------|
| **指标编码** | daily_output |
| **指标名称** | 今日产量 |
| **定义** | 当日00:00至当前时刻所有产线完成的成品数量总和 |
| **口径/公式** | `SUM(completed_quantity) WHERE production_date = CURRENT_DATE AND status = 'completed'` |
| **数据来源** | MES → production_data.completed_quantity |
| **刷新频率** | 每2小时 |
| **单位** | 件 |
| **舍入规则** | 整数，不保留小数 |
| **责任部门** | 生产部 |
| **责任人** | 生产部经理 |
| **验收阈值** | - |
| **异常处理** | 停机状态的批次不计入；维护状态的产线不计入 |

---

### 1.2 产能达成率

| 项目 | 内容 |
|------|------|
| **指标编码** | capacity_achievement_rate |
| **指标名称** | 产能达成率 |
| **定义** | 实际产量占计划产量的百分比 |
| **口径/公式** | `(SUM(completed_quantity) / SUM(target_quantity)) × 100%` |
| **数据来源** | MES → production_data.completed_quantity, production_data.target_quantity |
| **刷新频率** | 每2小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 生产部 |
| **责任人** | 生产部经理 |
| **验收阈值** | 预警：< 80%；严重：< 60% |
| **异常处理** | 仅计算状态为"运行中"或"已完成"的批次 |

---

### 1.3 设备综合效率（OEE）

| 项目 | 内容 |
|------|------|
| **指标编码** | oee |
| **指标名称** | 设备综合效率（OEE） |
| **定义** | 设备可用率 × 性能效率 × 质量合格率 |
| **口径/公式** | `(实际运行时间 / 计划运行时间) × (实际产量 / 理论产量) × 合格率` |
| **数据来源** | MES → equipment_data（占位） |
| **刷新频率** | 每4小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 设备部 |
| **责任人** | 设备部经理 |
| **验收阈值** | 预警：< 70%；严重：< 50% |
| **异常处理** | 计划维护时间不计入计划运行时间 |

---

## 2. 质量管理指标（QMS）

### 2.1 合格率

| 项目 | 内容 |
|------|------|
| **指标编码** | quality_rate |
| **指标名称** | 合格率 |
| **定义** | 质量检验合格批次占总批次的百分比 |
| **口径/公式** | `(COUNT(result = '合格') / COUNT(*)) × 100% WHERE inspection_type = '成品'` |
| **数据来源** | QMS → quality_data.result |
| **刷新频率** | 每1小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 质量部 |
| **责任人** | 质量部经理 |
| **验收阈值** | 预警：< 95%；严重：< 90% |
| **异常处理** | 复检通过的批次计为合格；复检仍不合格计为不合格 |

---

### 2.2 一次检验合格率

| 项目 | 内容 |
|------|------|
| **指标编码** | first_pass_rate |
| **指标名称** | 一次检验合格率 |
| **定义** | 首次检验即合格的批次占总批次的百分比 |
| **口径/公式** | `(COUNT(result = '合格' AND retry_count = 0) / COUNT(*)) × 100%` |
| **数据来源** | QMS → quality_data.result, quality_data.retry_count |
| **刷新频率** | 每1小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 质量部 |
| **责任人** | 质量部经理 |
| **验收阈值** | 预警：< 90%；严重：< 85% |
| **异常处理** | 不包含复检批次 |

---

### 2.3 不合格品数量

| 项目 | 内容 |
|------|------|
| **指标编码** | defect_count |
| **指标名称** | 不合格品数量 |
| **定义** | 检验结果为"不合格"的批次数量 |
| **口径/公式** | `COUNT(*) WHERE result = '不合格' AND inspection_date = CURRENT_DATE` |
| **数据来源** | QMS → quality_data.result |
| **刷新频率** | 每1小时 |
| **单位** | 批次 |
| **舍入规则** | 整数 |
| **责任部门** | 质量部 |
| **责任人** | 质量部经理 |
| **验收阈值** | 预警：> 5批次/天；严重：> 10批次/天 |
| **异常处理** | 复检合格后不计入不合格品 |

---

### 2.4 检验及时率

| 项目 | 内容 |
|------|------|
| **指标编码** | inspection_timeliness |
| **指标名称** | 检验及时率 |
| **定义** | 在规定时间内完成检验的批次占比 |
| **口径/公式** | `(COUNT(完成时间 - 提交时间 <= 24小时) / COUNT(*)) × 100%` |
| **数据来源** | QMS → inspection_record.submitted_at, inspection_record.completed_at |
| **刷新频率** | 每4小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 质量部 |
| **责任人** | 质量部经理 |
| **验收阈值** | 预警：< 95%；严重：< 90% |
| **异常处理** | 节假日顺延 |

---

## 3. 库存管理指标（WMS）

### 3.1 库存预警数量

| 项目 | 内容 |
|------|------|
| **指标编码** | inventory_alert_count |
| **指标名称** | 库存预警数量 |
| **定义** | 当前库存低于安全库存的产品品种数量 |
| **口径/公式** | `COUNT(*) WHERE quantity < safety_stock` |
| **数据来源** | WMS → inventory_data.quantity, inventory_data.safety_stock |
| **刷新频率** | 每4小时 |
| **单位** | 品种 |
| **舍入规则** | 整数 |
| **责任部门** | 仓储部 |
| **责任人** | 仓储部经理 |
| **验收阈值** | 预警：> 3品种；严重：> 5品种 |
| **异常处理** | 包含在途库存（已下单未到货） |

---

### 3.2 库存周转率

| 项目 | 内容 |
|------|------|
| **指标编码** | inventory_turnover_rate |
| **指标名称** | 库存周转率 |
| **定义** | 出库金额与平均库存金额的比值 |
| **口径/公式** | `(出库金额 / 平均库存金额) × 365天` |
| **数据来源** | WMS → inventory_data.quantity, inventory_data.unit_price, outbound_data.amount |
| **刷新频率** | 每日8:30 |
| **单位** | 次/年 |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 仓储部 |
| **责任人** | 仓储部经理 |
| **验收阈值** | 预警：< 6次/年；严重：< 4次/年 |
| **异常处理** | 仅计算成品库存，不含原料 |

---

### 3.3 呆滞库存占比

| 项目 | 内容 |
|------|------|
| **指标编码** | obsolete_inventory_ratio |
| **指标名称** | 呆滞库存占比 |
| **定义** | 超过180天未出库的库存金额占总库存金额的百分比 |
| **口径/公式** | `(SUM(quantity × unit_price WHERE last_outbound_date < CURRENT_DATE - 180) / SUM(quantity × unit_price)) × 100%` |
| **数据来源** | WMS → inventory_data.last_outbound_date |
| **刷新频率** | 每周一8:30 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 仓储部 |
| **责任人** | 仓储部经理 |
| **验收阈值** | 预警：> 10%；严重：> 15% |
| **异常处理** | 包含所有仓库 |

---

## 4. 订单管理指标（ERP）

### 4.1 订单按时交付率

| 项目 | 内容 |
|------|------|
| **指标编码** | on_time_delivery_rate |
| **指标名称** | 订单按时交付率 |
| **定义** | 在承诺交付日期前完成发货的订单占比 |
| **口径/公式** | `(COUNT(actual_delivery_date <= promised_delivery_date) / COUNT(*)) × 100%` |
| **数据来源** | ERP → order_data.actual_delivery_date, order_data.promised_delivery_date |
| **刷新频率** | 每日8:30 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 销售部 |
| **责任人** | 销售部经理 |
| **验收阈值** | 预警：< 95%；严重：< 90% |
| **异常处理** | 客户主动延期的订单不计入逾期 |

---

### 4.2 订单完成率

| 项目 | 内容 |
|------|------|
| **指标编码** | order_fulfillment_rate |
| **指标名称** | 订单完成率 |
| **定义** | 状态为"已完成"的订单占当月订单总数的百分比 |
| **口径/公式** | `(COUNT(status = '已完成') / COUNT(*)) × 100% WHERE order_date >= MONTH_START` |
| **数据来源** | ERP → order_data.status |
| **刷新频率** | 每日8:30 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 销售部 |
| **责任人** | 销售部经理 |
| **验收阈值** | 预警：< 90%；严重：< 85% |
| **异常处理** | 已取消订单不计入总数 |

---

### 4.3 平均订单金额

| 项目 | 内容 |
|------|------|
| **指标编码** | average_order_value |
| **指标名称** | 平均订单金额 |
| **定义** | 当月订单总金额与订单数量的比值 |
| **口径/公式** | `SUM(order_amount) / COUNT(*) WHERE order_date >= MONTH_START` |
| **数据来源** | ERP → order_data.order_amount |
| **刷新频率** | 每日8:30 |
| **单位** | 元 |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 销售部 |
| **责任人** | 销售部经理 |
| **验收阈值** | - |
| **异常处理** | 已取消订单不计入 |

---

## 5. 工单管理指标（低代码平台）

### 5.1 待处理工单数

| 项目 | 内容 |
|------|------|
| **指标编码** | pending_workorder_count |
| **指标名称** | 待处理工单数 |
| **定义** | 当前状态为"待处理"的生产异常工单数量 |
| **口径/公式** | `COUNT(*) WHERE status = 'pending'` |
| **数据来源** | 低代码平台 → production_workorder.status |
| **刷新频率** | 实时 |
| **单位** | 件 |
| **舍入规则** | 整数 |
| **责任部门** | 生产部 |
| **责任人** | 生产部经理 |
| **验收阈值** | 预警：> 10件；严重：> 20件 |
| **异常处理** | - |

---

### 5.2 工单平均处理时长

| 项目 | 内容 |
|------|------|
| **指标编码** | average_workorder_handling_time |
| **指标名称** | 工单平均处理时长 |
| **定义** | 工单从创建到完成的平均时长 |
| **口径/公式** | `AVG(completed_at - created_at) WHERE status = 'completed'` |
| **数据来源** | 低代码平台 → production_workorder.created_at, production_workorder.completed_at |
| **刷新频率** | 每日8:30 |
| **单位** | 小时 |
| **舍入规则** | 保留1位小数 |
| **责任部门** | 生产部 |
| **责任人** | 生产部经理 |
| **验收阈值** | 预警：> 48小时；严重：> 72小时 |
| **异常处理** | 仅计算已完成的工单 |

---

### 5.3 紧急工单占比

| 项目 | 内容 |
|------|------|
| **指标编码** | urgent_workorder_ratio |
| **指标名称** | 紧急工单占比 |
| **定义** | 优先级为"紧急"或"非常紧急"的工单占比 |
| **口径/公式** | `(COUNT(priority IN ('urgent', 'critical')) / COUNT(*)) × 100%` |
| **数据来源** | 低代码平台 → production_workorder.priority |
| **刷新频率** | 每日8:30 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 生产部 |
| **责任人** | 生产部经理 |
| **验收阈值** | 预警：> 30%；严重：> 50% |
| **异常处理** | 仅计算当月工单 |

---

## 6. OKR与绩效指标（低代码平台）

### 6.1 OKR整体完成度

| 项目 | 内容 |
|------|------|
| **指标编码** | okr_overall_completion |
| **指标名称** | OKR整体完成度 |
| **定义** | 所有"执行中"状态OKR的完成度加权平均 |
| **口径/公式** | `AVG(overall_progress) WHERE status = 'in_progress' AND period_id = CURRENT_PERIOD` |
| **数据来源** | 低代码平台 → okr.overall_progress |
| **刷新频率** | 实时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | HR |
| **责任人** | HR经理 |
| **验收阈值** | 预警：< 60%；严重：< 50% |
| **异常处理** | 未开始的OKR视为0%；已完成的OKR不计入 |

---

### 6.2 绩效平均分

| 项目 | 内容 |
|------|------|
| **指标编码** | average_performance_score |
| **指标名称** | 绩效平均分 |
| **定义** | 当前绩效周期内所有员工的最终绩效得分平均值 |
| **口径/公式** | `AVG(final_score) WHERE period_id = CURRENT_PERIOD` |
| **数据来源** | 低代码平台 → performance_evaluation.final_score |
| **刷新频率** | 每日8:30 |
| **单位** | 分 |
| **舍入规则** | 保留1位小数 |
| **责任部门** | HR |
| **责任人** | HR经理 |
| **验收阈值** | - |
| **异常处理** | 仅计算已完成评估的员工 |

---

### 6.3 OKR审批及时率

| 项目 | 内容 |
|------|------|
| **指标编码** | okr_approval_timeliness |
| **指标名称** | OKR审批及时率 |
| **定义** | 在24小时内完成审批的OKR占比 |
| **口径/公式** | `(COUNT(approved_at - created_at <= 24小时) / COUNT(*)) × 100% WHERE status IN ('in_progress', 'rejected')` |
| **数据来源** | 低代码平台 → okr.created_at, okr.approved_at |
| **刷新频率** | 每日8:30 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | 各部门经理 |
| **责任人** | 各部门经理 |
| **验收阈值** | 预警：< 90%；严重：< 80% |
| **异常处理** | 节假日顺延 |

---

## 7. 系统对接指标（低代码平台）

### 7.1 数据源在线率

| 项目 | 内容 |
|------|------|
| **指标编码** | datasource_online_rate |
| **指标名称** | 数据源在线率 |
| **定义** | 状态为"在线"的数据源占比 |
| **口径/公式** | `(COUNT(status = 'online') / COUNT(*)) × 100%` |
| **数据来源** | 低代码平台 → datasource.status |
| **刷新频率** | 每5分钟 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | IT部 |
| **责任人** | IT经理 |
| **验收阈值** | 预警：< 90%；严重：< 80% |
| **异常处理** | - |

---

### 7.2 数据同步成功率

| 项目 | 内容 |
|------|------|
| **指标编码** | sync_success_rate |
| **指标名称** | 数据同步成功率 |
| **定义** | 最近24小时内同步成功的任务占比 |
| **口径/公式** | `(COUNT(status = 'success') / COUNT(*)) × 100% WHERE last_run_at >= CURRENT_TIMESTAMP - INTERVAL '24 hours'` |
| **数据来源** | 低代码平台 → sync_task.status |
| **刷新频率** | 每1小时 |
| **单位** | % |
| **舍入规则** | 保留2位小数 |
| **责任部门** | IT部 |
| **责任人** | IT经理 |
| **验收阈值** | 预警：< 95%；严重：< 90% |
| **异常处理** | - |

---

## 8. 指标汇总表

| 编号 | 指标编码 | 指标名称 | 分类 | 来源系统 | 刷新频率 | 责任部门 |
|------|---------|---------|------|---------|---------|---------|
| 1 | daily_output | 今日产量 | 生产 | MES | 每2小时 | 生产部 |
| 2 | capacity_achievement_rate | 产能达成率 | 生产 | MES | 每2小时 | 生产部 |
| 3 | oee | 设备综合效率 | 生产 | MES | 每4小时 | 设备部 |
| 4 | quality_rate | 合格率 | 质量 | QMS | 每1小时 | 质量部 |
| 5 | first_pass_rate | 一次检验合格率 | 质量 | QMS | 每1小时 | 质量部 |
| 6 | defect_count | 不合格品数量 | 质量 | QMS | 每1小时 | 质量部 |
| 7 | inspection_timeliness | 检验及时率 | 质量 | QMS | 每4小时 | 质量部 |
| 8 | inventory_alert_count | 库存预警数量 | 库存 | WMS | 每4小时 | 仓储部 |
| 9 | inventory_turnover_rate | 库存周转率 | 库存 | WMS | 每日8:30 | 仓储部 |
| 10 | obsolete_inventory_ratio | 呆滞库存占比 | 库存 | WMS | 每周一8:30 | 仓储部 |
| 11 | on_time_delivery_rate | 订单按时交付率 | 订单 | ERP | 每日8:30 | 销售部 |
| 12 | order_fulfillment_rate | 订单完成率 | 订单 | ERP | 每日8:30 | 销售部 |
| 13 | average_order_value | 平均订单金额 | 订单 | ERP | 每日8:30 | 销售部 |
| 14 | pending_workorder_count | 待处理工单数 | 工单 | 平台 | 实时 | 生产部 |
| 15 | average_workorder_handling_time | 工单平均处理时长 | 工单 | 平台 | 每日8:30 | 生产部 |
| 16 | urgent_workorder_ratio | 紧急工单占比 | 工单 | 平台 | 每日8:30 | 生产部 |
| 17 | okr_overall_completion | OKR整体完成度 | 绩效 | 平台 | 实时 | HR |
| 18 | average_performance_score | 绩效平均分 | 绩效 | 平台 | 每日8:30 | HR |
| 19 | okr_approval_timeliness | OKR审批及时率 | 绩效 | 平台 | 每日8:30 | 各部门 |
| 20 | datasource_online_rate | 数据源在线率 | 系统 | 平台 | 每5分钟 | IT部 |
| 21 | sync_success_rate | 数据同步成功率 | 系统 | 平台 | 每1小时 | IT部 |

---

**文档结束**
