# 跨Agent协作与推进 - 汇仁药业低代码平台

## 文档信息

| 项目 | 内容 |
|------|------|
| 版本 | v2.0 |
| 创建时间 | 2025-12-11 |
| 更新时间 | 2025-12-11 |

---

## 1. 交接记录

### [2025-12-11 PM] PM → Designer

**阶段**：需求整理完成，准备设计交接

**输入**：
- PRD v2.0（prd.md）
- 页面调整方案（pages-adjustment.md）
- 字段字典（dictionary.md）

**输出要求**：
- [ ] 设计规范（DESIGN_GUIDE.md）
  - 24×12栅格系统
  - 分辨率清单（1920×1080、1440×900）
  - 主题Token（颜色、字体、间距）
  - 制药行业风格（偏向专业、严谨、清洁）
- [ ] 核心页面设计稿
  - 运营总览大屏（新增6个系统状态模块）
  - 生产异常工单详情（新增流转时间轴）
  - 生产进度看板（新增）
  - 质量检验工单（新增）
  - 库存预警（新增）

**DoD（Definition of Done）**：
- 设计稿完成并提交到 `/design` 目录
- 组件库清单确认（复用Ant Design Vue，补充自定义组件）
- 图标清单确认（生产、质量、库存相关图标）

**阻塞项**：
- 无

**预计时长**：
- 设计规范：2小时
- 核心页面设计：6小时
- 合计：8小时

---

### [2025-12-11 PM] PM → Backend

**阶段**：需求整理完成，准备后端开发交接

**输入**：
- PRD v2.0（prd.md）
- 字段字典（dictionary.md）
- KPI指标字典（kpi.md）
- 约定规范（convention.md）

**输出要求**：
- [ ] OpenAPI契约（/docs/api/openapi.yaml）
  - 所有API接口定义
  - 请求/响应Schema
  - 错误码定义（H{状态码}{业务编码}）
- [ ] 数据库迁移脚本（/migrations/）
  - V1.0.0__init_tables.sql
  - V1.1.0__add_okr_approval.sql
- [ ] Mock数据脚本（/scripts/mock-data.js）
  - 测试账号（5个角色）
  - OKR数据（10-15条）
  - 工单数据（10-15条）
  - 数据源配置（6个系统）

**DoD（Definition of Done）**：
- OpenAPI契约完整，Swagger UI可访问
- 数据库表结构完整，索引优化
- Mock数据可一键导入
- 核心接口可通过Postman测试

**阻塞项**：
- 技术选型确认（PostgreSQL版本、Koa版本）
- 部署环境确认（Windows环境，无Docker）

**预计时长**：
- OpenAPI契约：4小时
- 数据库设计：4小时
- Mock数据脚本：2小时
- 合计：10小时

---

### [2025-12-11 PM] PM → Frontend

**阶段**：需求整理完成，准备前端开发交接

**输入**：
- PRD v2.0（prd.md）
- 流程设计（flows.md）
- 页面调整方案（pages-adjustment.md）
- 约定规范（convention.md）

**输出要求**：
- [ ] P0页面改造（明天演示必须）
  - 运营总览大屏（OperationalDashboard.vue）
  - 生产异常工单（ProductionWorkOrder.vue）
  - 导航菜单调整（Dashboard.vue）
  - 删除客户360和销售漏斗
- [ ] Debug窗口组件（DebugConsole.vue）
  - 日志分类（API调用、工作流、数据同步、错误、用户操作）
  - 颜色区分
  - 可收起/展开
  - 清空日志
- [ ] 路由调整（router/index.js）
  - 新增路由（生产、质量、供应链模块）
  - 删除路由（客户360、销售漏斗）
  - 权限控制

**DoD（Definition of Done）**：
- P0页面可完整演示（3个核心场景）
- Debug窗口实时展示日志
- 所有页面通过ESLint检查
- 响应式布局支持1920×1080和1440×900

**阻塞项**：
- 设计稿未完成（可先使用现有组件占位）

**预计时长**：
- P0页面改造：6小时
- Debug窗口：2小时
- 路由调整：1.5小时
- 合计：9.5小时

---

### [待交接] PM → Charts

**阶段**：前端P0完成后，准备图表开发交接

**输入**：
- KPI指标字典（kpi.md）
- 运营总览设计稿
- 图表渲染参数

**输出要求**：
- [ ] 生产趋势图（折线图，最近7天产量）
- [ ] 质量趋势图（柱状图,最近7天合格率）
- [ ] 异常工单统计（饼图，按类型分布）
- [ ] 库存分布图（雷达图，各品种库存占比）
- [ ] 数据血缘图（关系图，系统 → 表 → 应用）

**DoD（Definition of Done）**：
- 图表支持Canvas渲染（ECharts）
- 图表支持数据动态刷新
- 图表支持导出图片
- 图表支持主题切换

**阻塞项**：
- 运营总览页面布局未完成

**预计时长**：
- 5个图表开发：10小时

---

### [待交接] PM → QA

**阶段**：P1功能完成后，准备测试交接

**输入**：
- 验收标准（acceptance.md）
- 测试账号清单
- 演示脚本

**输出要求**：
- [ ] 测试用例（基于BDD格式）
  - 场景1：OKR + 绩效管理全流程
  - 场景2：生产 + 质量管理联动
  - 场景3：多系统数据聚合展示
- [ ] 测试报告
  - 功能测试结果
  - 性能测试结果（首屏加载时间、接口响应时间）
  - 兼容性测试结果（浏览器、分辨率）

**DoD（Definition of Done）**：
- 所有P0功能测试通过
- 核心场景无阻塞性Bug
- 测试报告提交到 `/docs/test-report.md`

**阻塞项**：
- P1功能未完成

**预计时长**：
- 测试用例编写：4小时
- 功能测试：6小时
- 合计：10小时

---

### [待交接] PM → DevOps

**阶段**：测试通过后，准备部署交接

**输入**：
- 部署环境要求（Windows，无Docker）
- 依赖清单（Node.js版本、PostgreSQL版本）

**输出要求**：
- [ ] 部署脚本（deploy.sh 或 deploy.bat）
- [ ] 环境变量配置（.env.example）
- [ ] 监控配置（日志收集、错误监控）

**DoD（Definition of Done）**：
- 演示环境可正常访问
- Mock数据已导入
- 测试账号可正常登录

**阻塞项**：
- 测试未通过

**预计时长**：
- 部署脚本：2小时
- 环境配置：2小时
- 合计：4小时

---

## 2. 当前进度跟踪

### 2.1 里程碑进度

| 里程碑 | 计划时间 | 状态 | 完成度 | 阻塞项 |
|-------|---------|------|--------|--------|
| **M1** | 2025-12-12 | 🟡 进行中 | 60% | 设计稿未完成 |
| **M2** | 2025-12-20 | ⚪ 未开始 | 0% | M1未完成 |
| **M3** | 2026-01-15 | ⚪ 未开始 | 0% | M2未完成 |

---

### 2.2 分任务进度（M1）

| 任务 | 负责人 | 状态 | 完成度 | 预计完成时间 |
|------|--------|------|--------|-------------|
| 需求整理与文档生成 | PM | ✅ 已完成 | 100% | 2025-12-11 |
| 设计规范与设计稿 | Designer | ⚪ 未开始 | 0% | 2025-12-11 晚 |
| OpenAPI契约与数据库设计 | Backend | ⚪ 未开始 | 0% | 2025-12-11 晚 |
| P0页面改造 | Frontend | ⚪ 未开始 | 0% | 2025-12-12 上午 |
| Debug窗口开发 | Frontend | ⚪ 未开始 | 0% | 2025-12-12 上午 |
| Mock数据准备 | Frontend | ⚪ 未开始 | 0% | 2025-12-12 上午 |
| 演示彩排 | All | ⚪ 未开始 | 0% | 2025-12-12 下午 |

---

## 3. 风险与应对

### 3.1 当前风险

| 风险项 | 影响 | 概率 | 应对措施 |
|-------|------|------|---------|
| 时间紧迫（明天演示） | 高 | 高 | 优先完成P0任务，P1/P2占位展示 |
| 设计稿未完成 | 中 | 中 | 前端先用现有组件占位 |
| 后端未实现 | 高 | 高 | 前端使用Mock数据，展示数据源配置界面 |
| Debug窗口干扰演示 | 低 | 低 | 设计为可收起，默认展开 |

---

### 3.2 应急预案

#### 场景1：设计稿明天上午仍未完成
**应对**：
- 前端直接使用Ant Design Vue组件
- 颜色使用默认主题（蓝色）
- 延后设计优化到M2

#### 场景2：前端P0页面无法按时完成
**应对**：
- 仅演示"运营总览"和"OKR管理"（核心中的核心）
- 其他页面使用截图占位
- 说明"功能开发中"

#### 场景3：演示时出现Bug
**应对**：
- 准备备用演示环境（录屏视频）
- 准备演讲稿，转移焦点到产品价值
- Debug窗口可实时展示错误日志，体现透明度

---

## 4. 下一步行动

### 4.1 立即执行（今晚）

| 任务 | 负责人 | 预计时长 | 截止时间 |
|------|--------|---------|---------|
| 确认技术选型（PostgreSQL版本、Koa版本） | Backend | 0.5小时 | 2025-12-11 20:00 |
| 开始OpenAPI契约编写 | Backend | 2小时 | 2025-12-11 22:00 |
| 开始设计规范编写 | Designer | 2小时 | 2025-12-11 22:00 |
| 前端准备开发环境（安装依赖、配置ESLint） | Frontend | 0.5小时 | 2025-12-11 20:00 |

---

### 4.2 明天上午（2025-12-12 08:00 - 12:00）

| 任务 | 负责人 | 预计时长 | 截止时间 |
|------|--------|---------|---------|
| P0页面改造（运营总览、生产工单、导航菜单） | Frontend | 4小时 | 2025-12-12 12:00 |
| Debug窗口开发 | Frontend | 2小时 | 2025-12-12 10:00 |
| Mock数据准备 | Frontend | 1小时 | 2025-12-12 11:00 |

---

### 4.3 明天下午（2025-12-12 14:00 - 17:00）

| 任务 | 负责人 | 预计时长 | 截止时间 |
|------|--------|---------|---------|
| 演示彩排（走通3个场景） | All | 1小时 | 2025-12-12 15:00 |
| Bug修复与优化 | Frontend | 2小时 | 2025-12-12 17:00 |
| 演示脚本确认 | PM | 0.5小时 | 2025-12-12 17:00 |

---

## 5. 协作工具与沟通

### 5.1 协作工具

| 工具 | 用途 | 负责人 |
|------|------|--------|
| Git | 代码版本管理 | All |
| 文档库（.ai/目录） | 需求与设计文档 | PM + Designer |
| Figma | 设计稿 | Designer |
| Postman | API测试 | Backend + Frontend |
| 会议室 | 每日站会（10分钟） | PM |

---

### 5.2 沟通节点

| 时间 | 类型 | 参与人 | 议题 |
|------|------|--------|------|
| 2025-12-11 19:00 | Kick-off会议 | All | 明确分工、时间节点、风险 |
| 2025-12-11 22:00 | 进度同步 | PM + Backend + Designer | 确认OpenAPI契约与设计稿初稿 |
| 2025-12-12 08:00 | 每日站会 | All | 同步进度、阻塞项 |
| 2025-12-12 12:00 | 进度同步 | PM + Frontend | 确认P0页面完成情况 |
| 2025-12-12 15:00 | 彩排 | All | 走通演示流程 |

---

## 6. 成功标准（M1）

### 6.1 演示成功标准

- [ ] 3个核心场景可完整演示（OKR + 绩效、生产 + 质量、多系统对接）
- [ ] Debug窗口实时展示日志（至少5条）
- [ ] 6个系统连接状态可视化展示
- [ ] 无阻塞性Bug（非核心功能可降级）

---

### 6.2 文档完整性标准

- [x] PRD（prd.md）
- [x] 流程设计（flows.md）
- [x] 页面调整方案（pages-adjustment.md）
- [x] 字段字典（dictionary.md）
- [x] KPI指标字典（kpi.md）
- [x] 约定规范（convention.md）
- [x] 进度跟踪（progress.md）
- [ ] 验收标准（acceptance.md）- 待完成

---

**文档结束**
