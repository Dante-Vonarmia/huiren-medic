<template>
  <div class="page-builder">
    <div class="builder-header">
      <div class="header-title">
        <LayoutOutlined style="font-size: 24px; color: #722ed1" />
        <span>é¡µé¢æ„å»ºå™¨</span>
      </div>
      <a-space>
        <a-radio-group v-model:value="device" button-style="solid">
          <a-radio-button value="desktop"><DesktopOutlined /> æ¡Œé¢</a-radio-button>
          <a-radio-button value="tablet"><TabletOutlined /> å¹³æ¿</a-radio-button>
          <a-radio-button value="mobile"><MobileOutlined /> æ‰‹æœº</a-radio-button>
        </a-radio-group>
        <a-button type="primary" @click="publish">
          <GlobalOutlined /> å‘å¸ƒ
        </a-button>
      </a-space>
    </div>

    <div class="builder-container">
      <!-- å·¦ä¾§ç»„ä»¶ -->
      <div class="component-panel">
        <a-tabs>
          <a-tab-pane key="components" tab="ç»„ä»¶">
            <a-collapse default-active-key="['display', 'form', 'data']" ghost>
              <a-collapse-panel key="display" header="å±•ç¤ºç»„ä»¶">
                <div class="comp-grid">
                  <div class="comp-item"><TableOutlined /> è¡¨æ ¼</div>
                  <div class="comp-item"><BarChartOutlined /> å›¾è¡¨</div>
                  <div class="comp-item"><FileTextOutlined /> æ–‡æœ¬</div>
                  <div class="comp-item"><PictureOutlined /> å›¾ç‰‡</div>
                </div>
              </a-collapse-panel>
              <a-collapse-panel key="form" header="è¡¨å•ç»„ä»¶">
                <div class="comp-grid">
                  <div class="comp-item"><EditOutlined /> è¾“å…¥æ¡†</div>
                  <div class="comp-item"><DownOutlined /> ä¸‹æ‹‰æ¡†</div>
                  <div class="comp-item"><CalendarOutlined /> æ—¥æœŸ</div>
                  <div class="comp-item"><UploadOutlined /> ä¸Šä¼ </div>
                </div>
              </a-collapse-panel>
              <a-collapse-panel key="data" header="æ•°æ®ç»„ä»¶">
                <div class="comp-grid">
                  <div class="comp-item"><DatabaseOutlined /> æ•°æ®è¡¨æ ¼</div>
                  <div class="comp-item"><LineChartOutlined /> è¶‹åŠ¿å›¾</div>
                  <div class="comp-item"><PieChartOutlined /> é¥¼å›¾</div>
                  <div class="comp-item"><DashboardOutlined /> ä»ªè¡¨ç›˜</div>
                </div>
              </a-collapse-panel>
            </a-collapse>
          </a-tab-pane>
          <a-tab-pane key="templates" tab="æ¨¡æ¿">
            <div class="template-list">
              <div class="template-item">ğŸ“Š æ•°æ®çœ‹æ¿</div>
              <div class="template-item">ğŸ“ è¡¨å•é¡µé¢</div>
              <div class="template-item">ğŸ“‹ åˆ—è¡¨é¡µé¢</div>
              <div class="template-item">ğŸ“„ è¯¦æƒ…é¡µé¢</div>
            </div>
          </a-tab-pane>
        </a-tabs>
      </div>

      <!-- ä¸­é—´ç”»å¸ƒ -->
      <div class="canvas-panel">
        <div class="canvas-wrapper" :class="deviceClass">
          <div class="page-canvas">
            <!-- æ¨¡æ‹Ÿé¡µé¢ -->
            <div class="page-header-demo">
              <h1>å®¢æˆ·360è§†å›¾</h1>
            </div>

            <div class="page-grid">
              <div class="grid-item" style="grid-column: span 2">
                <div class="widget-card">
                  <div class="widget-header">
                    <UserOutlined /> å®¢æˆ·ä¿¡æ¯
                  </div>
                  <div class="widget-content">
                    <div class="info-row">
                      <span>å®¢æˆ·åç§°:</span>
                      <span>XXåŒ»è¯æœ‰é™å…¬å¸</span>
                    </div>
                    <div class="info-row">
                      <span>å®¢æˆ·ç­‰çº§:</span>
                      <a-tag color="gold">VIP</a-tag>
                    </div>
                  </div>
                </div>
              </div>

              <div class="grid-item">
                <div class="widget-card">
                  <div class="widget-header">
                    <ShoppingOutlined /> ç´¯è®¡è®¢å•
                  </div>
                  <div class="widget-content">
                    <div class="stat-value">25</div>
                    <div class="stat-label">ç¬”</div>
                  </div>
                </div>
              </div>

              <div class="grid-item">
                <div class="widget-card">
                  <div class="widget-header">
                    <DollarOutlined /> è®¢å•é‡‘é¢
                  </div>
                  <div class="widget-content">
                    <div class="stat-value">Â¥285ä¸‡</div>
                  </div>
                </div>
              </div>

              <div class="grid-item" style="grid-column: span 4">
                <div class="widget-card">
                  <div class="widget-header">
                    <TableOutlined /> è®¢å•å†å²
                  </div>
                  <div class="widget-content">
                    <table class="demo-table">
                      <thead>
                        <tr>
                          <th>è®¢å•å·</th>
                          <th>é‡‘é¢</th>
                          <th>çŠ¶æ€</th>
                          <th>æ—¶é—´</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>ORD20251211001</td>
                          <td>Â¥128,000</td>
                          <td><a-tag color="success">å·²ç¡®è®¤</a-tag></td>
                          <td>2025-12-11</td>
                        </tr>
                        <tr>
                          <td>ORD20251210001</td>
                          <td>Â¥95,000</td>
                          <td><a-tag color="processing">å·²å‘è´§</a-tag></td>
                          <td>2025-12-10</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å³ä¾§å±æ€§ -->
      <div class="property-panel">
        <h3>é¡µé¢é…ç½®</h3>
        <a-form layout="vertical" size="small">
          <a-form-item label="é¡µé¢æ ‡é¢˜">
            <a-input value="å®¢æˆ·360è§†å›¾" />
          </a-form-item>
          <a-form-item label="å¸ƒå±€æ–¹å¼">
            <a-select value="grid">
              <a-select-option value="grid">ç½‘æ ¼å¸ƒå±€</a-select-option>
              <a-select-option value="flex">å¼¹æ€§å¸ƒå±€</a-select-option>
            </a-select>
          </a-form-item>
          <a-form-item label="æ•°æ®æº">
            <a-select value="customer_360">
              <a-select-option value="customer_360">å®¢æˆ·360æŸ¥è¯¢</a-select-option>
            </a-select>
          </a-form-item>
        </a-form>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { message } from 'ant-design-vue'
import {
  LayoutOutlined,
  DesktopOutlined,
  TabletOutlined,
  MobileOutlined,
  GlobalOutlined,
  TableOutlined,
  BarChartOutlined,
  FileTextOutlined,
  PictureOutlined,
  EditOutlined,
  DownOutlined,
  CalendarOutlined,
  UploadOutlined,
  DatabaseOutlined,
  LineChartOutlined,
  PieChartOutlined,
  DashboardOutlined,
  UserOutlined,
  ShoppingOutlined,
  DollarOutlined
} from '@ant-design/icons-vue'

const device = ref('desktop')

const deviceClass = computed(() => {
  return `device-${device.value}`
})

const publish = () => {
  message.success('é¡µé¢å‘å¸ƒæˆåŠŸï¼')
}
</script>

<style scoped>
.page-builder {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background: #f0f2f5;
}

.builder-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  background: white;
  border-bottom: 1px solid #e8e8e8;
}

.header-title {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 18px;
  font-weight: 600;
}

.builder-container {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.component-panel {
  width: 250px;
  background: white;
  border-right: 1px solid #e8e8e8;
  overflow-y: auto;
}

.comp-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  padding: 8px;
}

.comp-item {
  padding: 12px 8px;
  background: #f9f9f9;
  border: 1px dashed #d9d9d9;
  border-radius: 4px;
  text-align: center;
  font-size: 12px;
  cursor: move;
}

.comp-item:hover {
  background: #e6f7ff;
  border-color: #1890ff;
}

.template-list {
  padding: 8px;
}

.template-item {
  padding: 12px;
  background: #f9f9f9;
  border-radius: 4px;
  margin-bottom: 8px;
  cursor: pointer;
}

.canvas-panel {
  flex: 1;
  overflow: auto;
  background: #e8e8e8;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.canvas-wrapper {
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  transition: all 0.3s;
}

.device-desktop {
  width: 1200px;
  height: 800px;
}

.device-tablet {
  width: 768px;
  height: 1024px;
}

.device-mobile {
  width: 375px;
  height: 667px;
}

.page-canvas {
  padding: 24px;
  height: 100%;
  overflow-y: auto;
}

.page-header-demo {
  margin-bottom: 24px;
}

.page-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.widget-card {
  background: white;
  border: 1px solid #e8e8e8;
  border-radius: 4px;
  overflow: hidden;
}

.widget-header {
  padding: 12px 16px;
  background: #fafafa;
  border-bottom: 1px solid #e8e8e8;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.widget-content {
  padding: 16px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.stat-value {
  font-size: 32px;
  font-weight: 700;
  color: #1890ff;
  text-align: center;
}

.stat-label {
  text-align: center;
  color: #999;
}

.demo-table {
  width: 100%;
  font-size: 12px;
}

.demo-table th {
  padding: 8px;
  background: #fafafa;
  font-weight: 600;
  text-align: left;
}

.demo-table td {
  padding: 8px;
  border-top: 1px solid #f0f0f0;
}

.property-panel {
  width: 300px;
  background: white;
  border-left: 1px solid #e8e8e8;
  overflow-y: auto;
  padding: 16px;
}
</style>
